Инициализация БД

Для инициализации БД необходимо создать экземпляр контекста БД (EfDbContext в проекте DataEF), 
в конструкторе которого прописан запуск инициализации БД по выбранной нами стратегии.

Выбор "стратегии" может быть сделан из стандартных для этого классов,
или же можно написать свой, реализовав интерфейс IDatabaseInitializer 
(или унаследовать его от одного из стандартных классов-стратегий, что мы и сделали).

В проекте DataEF создан класс EfDbInitializer. 
Он унаследован от класса CreateDatabaseIfNotExists, 
при котором БД никогда не будет удалена (а значит и данные не будут потеряны), 
так как БД создается только единожды, если её ещё не существует.

Так же, в классе EfDbInitializer переопределен метод Seed 
(который вызывается лишь один раз - сразу после создания новой БД), 
в который добавлены данные для первичного заполнения БД.
_________________________________

Использование миграций (EF Migrations) на примере сущности UserEntity в VS

1. В сущности UserEntity добавляем новое поле -  Name 

2. Открываем:
Средства —> Диспетчер пакетов NuGet —> Консоль диспетчера пакетов 

3. Вводим команду:
Add-Migration AddUserName -ProjectName "DataEF"
(AddUserName - имя нашей миграции)

Если всё сделано правильно, то создается и открывается файл миграции с методами Up и Down, 
содержащие код для добавления и удаления нового столбца

4. Чтобы данная миграция применилась к БД - вводим команду:
Update-Database -ProjectName "DataEF"

5. Проверяем наличие столбца в БД и радуемся 
_____________

Если мы передумали и хотим отменить изменения этой миграции

1. Убираем поле Name из сущности UserEntity

2. Вводим команду:
Get-Migrations -ProjectName "DataEF"

Из полученного списка всех примененных миграций копируем имя той, 
которая была до нашей миграции из пункта 3 текущей инструкции 
(в полученном списке она находится под нашей миграцией)

3. Вводим команду
Update-Database –TargetMigration: <Скопированное имя миграции из предыдущего пункта> -ProjectName "DataEF"

К примеру:
Update-Database –TargetMigration: 202102051056323_DefaultCreatedDateMigration -ProjectName "DataEF"

4. Проверяем в БД, что столбец действительно исчез 

5. Удаляем файл ненужной миграции (AddUserName) из проекта
